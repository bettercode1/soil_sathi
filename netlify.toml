# Netlify Configuration File
# This configures Netlify to deploy your React frontend

[build]
  # Build command for frontend
  command = "npm run build:client"
  # Output directory where Vite builds the frontend
  publish = "dist/client"

# Redirect all non-API routes to index.html for React Router
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Proxy API requests to your backend server
# Update this URL to match your Render backend URL
[[redirects]]
  from = "/api/*"
  to = "https://soil-sathi.onrender.com/api/:splat"
  status = 200
  force = true

# Disable secrets scanning for expected environment variable names
# These are just variable names in code, not actual secrets
[build.environment]
  SECRETS_SCAN_OMIT_KEYS = "NODE_ENV,GEMINI_API_KEY,GEMINI_MODEL"
  SECRETS_SCAN_OMIT_PATHS = ".env,dist/,node_modules/,.git/"
  # NODE_VERSION = "22.16.0"  # Uncomment if needed

